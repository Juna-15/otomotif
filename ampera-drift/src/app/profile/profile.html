<section class="profile-section bg-dark py-5">
    <div class="container">
        
        <app-profile-header 
            [user]="user" 
            (edit)="onEditProfile()" 
            (settings)="onSettings()">
        </app-profile-header>

        <div class="row mb-5">
            <div class="col-12">
                <app-stats-card [stats]="stats"></app-stats-card>
            </div>
        </div>

        <div class="row g-4">
            
            <div class="col-lg-8">
                
                <ul class="nav nav-pills nav-fill mb-4 nav-tabs-custom" id="profileTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="properties-tab" data-bs-toggle="tab" 
                                data-bs-target="#properties" type="button" role="tab">
                            <i class="bi bi-car-front-fill me-2"></i>Mobil Terjual
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="favorites-tab" data-bs-toggle="tab" 
                                data-bs-target="#favorites" type="button" role="tab">
                            <i class="bi bi-heart-fill me-2"></i>Unit Favorit
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="history-tab" data-bs-toggle="tab" 
                                data-bs-target="#history" type="button" role="tab">
                            <i class="bi bi-clock-history me-2"></i>Riwayat Aktivitas
                        </button>
                    </li>
                </ul>

                <div class="tab-content" id="profileTabsContent">
                    
                    <div class="tab-pane fade show active" id="properties" role="tabpanel">
                        <div class="row g-4">
                            
                            @for (property of properties; track $index) {
                                <div class="col-md-6">
                                    <app-property-item 
                                        [item]="property" 
                                        (edit)="onEditProperty($event)" 
                                        (remove)="onDeleteProperty($event)">
                                    </app-property-item>
                                </div>
                            }

                            <div class="col-md-6">
                                <div class="card h-100 card-add-new">
                                    <div class="card-body d-flex flex-column justify-content-center align-items-center text-center py-5">
                                        <i class="bi bi-plus-circle display-1 text-warning mb-3"></i>
                                        <h5 class="mb-2 text-white">Iklankan Mobil Baru</h5>
                                        <p class="text-white-50 mb-3">Daftarkan unit kendaraan Anda untuk dijual</p>
                                        <button class="btn btn-warning fw-bold text-dark">
                                            <i class="bi bi-plus-lg me-2"></i>Tambah Unit
                                        </button>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="tab-pane fade" id="favorites" role="tabpanel">
                        <div class="row g-4">
                            @for (favorite of favorites; track $index) {
                            <div class="col-md-6">
                                <app-favorite-item [item]="favorite"></app-favorite-item>
                            </div>
                            }
                        </div>

                        <div class="text-center mt-4">
                            <p class="text-white-50">Menampilkan {{ favorites.length }} dari {{ stats.favorites }} unit favorit</p>
                            <button class="btn btn-outline-warning text-white">
                                <i class="bi bi-arrow-down-circle me-2"></i>Lihat Semua Favorit
                            </button>
                        </div>
                    </div>

                    <div class="tab-pane fade" id="history" role="tabpanel">
                        <div class="card shadow-sm border-0 bg-dark text-white border border-secondary">
                            <div class="card-body">
                                
                                <div class="timeline">
                                    @for (item of history; track $index; let last = $last) {
                                        <app-history-item 
                                        [item]="item"
                                        [class.border-bottom-0]="last"
                                        [class.border-bottom]="!last"
                                        [class.mb-4]="!last"
                                        [class.pb-4]="!last">
                                        </app-history-item>
                                    }
                                </div>

                                <div class="text-center mt-4 pt-4 border-top border-secondary">
                                    <button class="btn btn-outline-warning text-white">
                                        <i class="bi bi-arrow-clockwise me-2"></i>Muat Lebih Banyak
                                    </button>
                                </div>

                            </div>
                        </div>
                    </div>

                </div>

            </div>
            
            <div class="col-lg-4">
                
                <app-about-card [user]="user"></app-about-card>
                
                <app-social-card [links]="socialLinks"></app-social-card>

            </div>

        </div>

    </div>
</section>